import{r as l,c as F,a as s,o as i,b as t,d as D,w as m,v as y,t as r,F as x,e as I,f as L,n as f}from"./index-DhvCZUVT.js";const V={class:"p-6"},N={class:"p-4 mb-4 bg-gray-100 rounded-md"},U={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-4"},$={class:"flex items-center mb-6"},z={class:"px-3 py-1 text-xs font-semibold text-blue-600 rounded-full bg-blue-50"},P={class:"overflow-auto"},A={key:0,class:"w-full text-sm border border-gray-200 rounded-lg shadow-sm"},E={class:"divide-y divide-gray-200"},H={class:"px-3 py-2"},O={class:"block"},W={class:"text-xs text-gray-400"},j={class:"flex items-center gap-x-1"},G={class:"px-3"},q={class:"px-3"},B={class:"capitalize"},J={class:"px-3"},K={class:"px-3"},Q=["onClick"],X={key:1,class:"flex items-center justify-center h-40"},Y={key:0,class:"py-1 mt-8 text-sm text-center text-gray-400"},et={__name:"Customers",setup(Z){const a=l([{id:1,name:"Alice",probability:.8,satisfactionScore:2,contractType:"monthly",interventionCount:1},{id:2,name:"Bob",probability:.3,satisfactionScore:4,contractType:"yearly",interventionCount:0},{id:3,name:"Charlie",probability:.6,satisfactionScore:3,contractType:"monthly",interventionCount:2},{id:4,name:"Diana",probability:.15,satisfactionScore:5,contractType:"yearly",interventionCount:0},{id:5,name:"Ethan",probability:.9,satisfactionScore:1,contractType:"monthly",interventionCount:3},{id:6,name:"Fiona",probability:.25,satisfactionScore:4,contractType:"yearly",interventionCount:0},{id:7,name:"George",probability:.55,satisfactionScore:3,contractType:"monthly",interventionCount:1},{id:8,name:"Hannah",probability:.05,satisfactionScore:5,contractType:"yearly",interventionCount:0}]),c=l(!1),p=l(!1),b=l("all"),h=l("all"),v=l("risk"),d=l("ascending"),k={all:{low:0,high:1},high:{low:.75,high:1},medium:{low:.2,high:.75},low:{low:0,high:.2}},C={all:null,true:!0,false:!1},S={id(o,e){return d.value==="ascending"?e.id-o.id:o.id-e.id},risk(o,e){return d.value==="ascending"?e.probability-o.probability:o.probability-e.probability},satisfaction(o,e){return d.value==="ascending"?e.satisfactionScore-o.satisfactionScore:o.satisfactionScore-e.satisfactionScore},interventions(o,e){return d.value==="ascending"?e.interventionCount-o.interventionCount:o.interventionCount-e.interventionCount}},w=F(()=>{if(!a.value)return a.value;const{low:o,high:e}=k[b.value],n=C[h.value],g=a.value.filter(u=>{const R=u.probability>o&&u.probability<=e,_=n===null||n===!0&&u.interventionCount>0||n===!1&&u.interventionCount===0;return R&&_}),T=S[v.value];return g.sort(T)}),M=async()=>{p.value=!0,await new Promise(e=>setTimeout(e,500));const o=a.value.length+1;a.value=[...a.value,{id:o,name:`User${o}`,probability:Math.random(),satisfactionScore:Math.ceil(Math.random()*5),contractType:Math.random()>.5?"monthly":"yearly",interventionCount:Math.floor(Math.random()*3)}],p.value=!1};return(o,e)=>(i(),s("div",V,[t("div",N,[e[14]||(e[14]=t("div",null,[t("h6",{class:"mb-3 text-xl font-semibold"},"Filters and Sorting")],-1)),t("div",U,[t("div",null,[e[5]||(e[5]=t("span",{class:"block text-sm font-semibold"},"Churn Risk",-1)),e[6]||(e[6]=t("span",{class:"block mb-2 text-xs font-semibold text-gray-500"},"Risk of the customer churning.",-1)),m(t("select",{name:"risk",class:"w-full px-2 py-1 text-sm bg-gray-200 rounded-md","onUpdate:modelValue":e[0]||(e[0]=n=>b.value=n)},[...e[4]||(e[4]=[t("option",{value:"all"},"All Risks",-1),t("option",{value:"high"},"High Risk (> 75%)",-1),t("option",{value:"medium"},"Medium Risk (20% - 75%)",-1),t("option",{value:"low"},"Low Risk (< 20%)",-1)])],512),[[y,b.value]])]),e[13]||(e[13]=D('<div><span class="block text-sm font-semibold">Intervened</span><span class="block mb-2 text-xs font-semibold text-gray-500">Actions taken to reduce churn.</span><select name="reason" class="w-full px-2 py-1 text-sm bg-gray-200 rounded-md"><option value="all">Any</option><option value="true">Interventions Taken</option><option value="false">No Interventions</option></select></div>',1)),t("div",null,[e[8]||(e[8]=t("span",{class:"block text-sm font-semibold"},"Sorting Property",-1)),e[9]||(e[9]=t("span",{class:"block mb-2 text-xs font-semibold text-gray-500"},"What property to sort on.",-1)),m(t("select",{name:"reason",class:"w-full px-2 py-1 text-sm bg-gray-200 rounded-md","onUpdate:modelValue":e[1]||(e[1]=n=>v.value=n)},[...e[7]||(e[7]=[t("option",{value:"id"},"Customer ID",-1),t("option",{value:"risk"},"Churn Probability",-1),t("option",{value:"satisfaction"},"Satisfaction Score",-1),t("option",{value:"interventions"},"Number of Interventions",-1)])],512),[[y,v.value]])]),t("div",null,[e[11]||(e[11]=t("span",{class:"block text-sm font-semibold"},"Sorting Direction",-1)),e[12]||(e[12]=t("span",{class:"block mb-2 text-xs font-semibold text-gray-500"},"Which direction to sort in.",-1)),m(t("select",{name:"reason",class:"w-full px-2 py-1 text-sm bg-gray-200 rounded-md","onUpdate:modelValue":e[2]||(e[2]=n=>d.value=n)},[...e[10]||(e[10]=[t("option",{value:"ascending"},"Ascending",-1),t("option",{value:"descending"},"Descending",-1)])],512),[[y,d.value]])])])]),t("div",$,[e[15]||(e[15]=t("h2",{class:"flex-1 text-xl font-semibold"},"All Customers",-1)),t("span",z," Showing "+r(a.value?.length)+" customers ",1)]),t("div",P,[c.value?(i(),s("div",X,[...e[17]||(e[17]=[t("span",{class:"text-sm text-gray-400"}," Loading Customers... ",-1)])])):(i(),s("table",A,[e[16]||(e[16]=t("thead",{class:"text-xs text-gray-500 border-b border-gray-300 bg-gray-50"},[t("tr",{class:"text-left"},[t("th",{class:"px-3 py-2"},"Customer"),t("th",{class:"px-3"},"Score"),t("th",{class:"px-3"},"Satisfaction Score"),t("th",{class:"px-3"},"Contract Type"),t("th",{class:"px-3"},"Interventions"),t("th",{class:"px-3"})])],-1)),t("tbody",E,[(i(!0),s(x,null,I(w.value,n=>(i(),s("tr",{key:n.id,class:"hover:bg-gray-50"},[t("td",H,[t("strong",O,r(n.name),1),t("span",W,r(String(n.id).padStart(3,"0")),1)]),t("td",{class:f(["px-3 text-emerald-600",{"text-rose-600":n.probability>.75}])},[t("div",j,[t("span",{class:f(["size-1.5 rounded-full block bg-emerald-600",{"bg-rose-600":n.probability>.75}])},null,2),t("span",null,r(Math.round(n.probability*1e4)/100)+"%",1)])],2),t("td",G,[t("span",null,r(n.satisfactionScore),1)]),t("td",q,[t("span",B,r(n.contractType),1)]),t("td",J,r(n.interventionCount),1),t("td",K,[t("button",{class:"px-2 py-1 text-sm text-blue-600 bg-blue-50 rounded-xl active:bg-blue-200 hover:bg-blue-100 duration-50 hover:cursor-pointer",onClick:g=>o.$router.push(`/customer/${n.id}`)}," Open ",8,Q)])]))),128))])])),!p.value&&!c.value?(i(),s("button",{key:2,class:"block px-2 py-1 mx-auto mt-8 text-sm text-blue-600 bg-blue-50 rounded-xl active:bg-blue-200 hover:bg-blue-100 duration-50 hover:cursor-pointer",onClick:e[3]||(e[3]=(async()=>await M()))}," Load More ")):(i(),s(x,{key:3},[c.value?L("",!0):(i(),s("div",Y," Loading customers... "))],64))])]))}};export{et as default};
